[{
   "uuid":"flow1",
   "name":"U-Report Registration Flow",
   "language":"eng",
   "nodes":[
      {
         "uuid":"node1",
         "router":{
            "type":"switch",
            "operand": "@contact",
            "default": "node1-exit1",
            "cases": [
              {
                "uuid": "node1-case1",
                "type": "has_group",
                "arguments": ["group2"],
                "exit": "node1-exit1"
              }
            ]
         },
         "exits":[
            {
               "uuid":"node1-exit1",
               "name":"U-Reporter",
               "destination":"node2"
            },
            {
               "uuid":"node1-exit2",
               "name":"Other",
               "destination":null
            }
         ]
      },
      {
         "uuid":"node2",
         "actions":[

         ],
         "router":{
            "type":"switch",
            "operand": "@contact.urns.facebook",
            "default": "node2-exit2",
            "cases": [
              {
                "uuid": "node2-case1",
                "type": "has_value",
                "exit": "node2-exit1"
              }
            ]
         },
         "exits":[
            {
               "uuid":"node2-exit1",
               "name":"Facebook",
               "destination":"node4"
            },
            {
               "uuid":"node2-exit2",
               "name":"Other",
               "destination":"node5"
            }
         ]
      },
      {
         "uuid":"node4",
         "actions":[
            {
               "uuid": "node4-action1",
               "type":"add_to_group",
               "group": "group1",
               "name": "Facebook"
            }
         ],
         "exits":[
            {
               "uuid":"node4-exit1",
               "destination":"node5"
            }
         ]
      },
      {
         "uuid":"node5",
         "actions":[
            {
               "uuid": "node5-action1",
               "type":"add_to_group",
               "group": "group2",
               "name": "U-Reporters"
            },
            {
               "uuid": "node5-action2",
               "type":"save_to_contact",
               "field": "field1",
               "name": "Registration Date",
               "value": "@(now())"
            },
            {
               "uuid": "node5-action3",
               "type":"msg",
               "text": "Welcome to U-Report. Type A for english, B for French"
            }
         ],
         "wait":{
            "type":"msg",
            "timeout": 600
         },
         "router":{
            "type":"switch",
            "operand": "@input",
            "default": "node5-exit3",
            "cases": [
              {
                "uuid": "node5-case1",
                "type": "has_any_word",
                "arguments": ["a english"],
                "exit": "node5-exit1"
              },
              {
                "uuid": "node5-case2",
                "type": "has_any_word",
                "arguments": ["b french"],
                "exit": "node5-exit2"
              }
            ]
         },
         "exits":[
            {
               "uuid":"node5-exit1",
               "destination":"node10",
               "name":"English"
            },
            {
               "uuid":"node5-exit2",
               "destination":"node11",
               "name":"French"
            },
            {
               "uuid":"node5-exit3",
               "destination":"node6",
               "name":"Other"
            }
         ]
      },
      {
         "uuid":"node6",
         "actions":[
            {
              "uuid": "node6-action1",
              "type":"msg",
              "text": "Sorry, that isn't a valid option, try again"
            }
         ],
         "exits":[
            {
               "uuid":"node6-exit1",
               "destination":"node5"
            }
         ]
      },
      {
         "uuid":"node10",
         "actions":[
            {
              "uuid": "node10-action1",
              "type":"set_language",
              "language": "eng"
            }
         ],
         "exits":[
            {
               "uuid":"node10-exit1",
               "destination":"node12"
            }
         ]
      },
      {
         "uuid":"node11",
         "actions":[
            {
              "uuid": "node11-action1",
              "type":"set_language",
              "language": "fra"
            }
         ],
         "exits":[
            {
               "uuid":"node11-exit1",
               "destination":"node12"
            }
         ]
      },
      {
         "uuid":"node12",
         "actions":[
            {
              "uuid": "node12-action1",
              "type":"msg",
              "text": "Great, you are now a U-Reporter and in the groups @contact.groups"
            }
         ],
         "exits":[

         ]
      }
   ]
}]